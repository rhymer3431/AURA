{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mango\\\\project\\\\AURA\\\\webui\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport CytoscapeComponent from \"react-cytoscapejs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WS_URL = \"ws://localhost:7000/ws\";\nconst VIDEO_URL = \"http://localhost:7000/video\";\nconst layout = {\n  name: \"cose\",\n  animate: true\n};\nconst style = [{\n  selector: \"node\",\n  style: {\n    \"background-color\": \"#39ff14\",\n    \"border-color\": \"#0affff\",\n    \"border-width\": 2,\n    label: \"data(label)\",\n    color: \"#e0f7ff\",\n    \"font-size\": 12,\n    \"text-outline-color\": \"#0f0f0f\",\n    \"text-outline-width\": 2\n  }\n}, {\n  selector: \"edge\",\n  style: {\n    width: 2,\n    \"line-color\": \"#3b7bff\",\n    \"target-arrow-color\": \"#3b7bff\",\n    \"target-arrow-shape\": \"triangle\",\n    label: \"data(label)\",\n    color: \"#9dc4ff\",\n    \"font-size\": 11,\n    \"text-background-opacity\": 0.6,\n    \"text-background-color\": \"#0f0f0f\",\n    \"curve-style\": \"bezier\"\n  }\n}];\nfunction toElements(graph) {\n  const nodes = (graph.nodes || []).map(n => {\n    var _n$label;\n    return {\n      data: {\n        id: String(n.id),\n        label: (_n$label = n.label) !== null && _n$label !== void 0 ? _n$label : n.id\n      }\n    };\n  });\n  const edges = (graph.edges || []).map((e, idx) => {\n    var _e$label;\n    return {\n      data: {\n        id: `e-${idx}-${e.source}-${e.target}`,\n        source: String(e.source),\n        target: String(e.target),\n        label: (_e$label = e.label) !== null && _e$label !== void 0 ? _e$label : \"\"\n      }\n    };\n  });\n  return [...nodes, ...edges];\n}\nfunction App() {\n  _s();\n  const cyRef = useRef(null);\n  const [elements, setElements] = useState([]);\n  const [retryToken, setRetryToken] = useState(Date.now());\n  const videoSrc = `${VIDEO_URL}?t=${retryToken}`;\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRetryToken(Date.now());\n    }, 10000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    let ws;\n    let retryTimer;\n    const connect = () => {\n      ws = new WebSocket(WS_URL);\n      ws.onmessage = evt => {\n        try {\n          const graph = JSON.parse(evt.data);\n          const newElements = toElements(graph);\n          setElements(newElements);\n          if (cyRef.current) {\n            cyRef.current.json({\n              elements: newElements\n            });\n            cyRef.current.layout(layout).run();\n          }\n        } catch (err) {\n          console.error(\"Failed to parse graph\", err);\n        }\n      };\n      ws.onopen = () => console.log(\"WS connected\");\n      ws.onclose = () => {\n        console.log(\"WS closed, retrying...\");\n        retryTimer = setTimeout(connect, 2000);\n      };\n      ws.onerror = e => console.error(\"WS error\", e);\n    };\n    connect();\n    return () => {\n      if (ws) ws.close();\n      if (retryTimer) clearTimeout(retryTimer);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: \"#0f0f0f\",\n      width: \"100vw\",\n      height: \"100vh\",\n      margin: 0,\n      padding: 0,\n      overflow: \"hidden\",\n      display: \"flex\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        borderRight: \"1px solid #1f1f1f\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: videoSrc,\n        alt: \"video stream\",\n        onError: () => setRetryToken(Date.now()),\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          objectFit: \"cover\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(CytoscapeComponent, {\n        cy: cy => {\n          cyRef.current = cy;\n        },\n        elements: elements,\n        layout: layout,\n        stylesheet: style,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"nx6JIiTbUd3NYmRHkVlfRiDEWd8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useRef","useState","CytoscapeComponent","jsxDEV","_jsxDEV","WS_URL","VIDEO_URL","layout","name","animate","style","selector","label","color","width","toElements","graph","nodes","map","n","_n$label","data","id","String","edges","e","idx","_e$label","source","target","App","_s","cyRef","elements","setElements","retryToken","setRetryToken","Date","now","videoSrc","interval","setInterval","clearInterval","ws","retryTimer","connect","WebSocket","onmessage","evt","JSON","parse","newElements","current","json","run","err","console","error","onopen","log","onclose","setTimeout","onerror","close","clearTimeout","background","height","margin","padding","overflow","display","children","flex","borderRight","src","alt","onError","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","cy","stylesheet","_c","$RefreshReg$"],"sources":["C:/Users/mango/project/AURA/webui/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport CytoscapeComponent from \"react-cytoscapejs\";\n\nconst WS_URL = \"ws://localhost:7000/ws\";\nconst VIDEO_URL = \"http://localhost:7000/video\";\n\nconst layout = { name: \"cose\", animate: true };\nconst style = [\n  {\n    selector: \"node\",\n    style: {\n      \"background-color\": \"#39ff14\",\n      \"border-color\": \"#0affff\",\n      \"border-width\": 2,\n      label: \"data(label)\",\n      color: \"#e0f7ff\",\n      \"font-size\": 12,\n      \"text-outline-color\": \"#0f0f0f\",\n      \"text-outline-width\": 2,\n    },\n  },\n  {\n    selector: \"edge\",\n    style: {\n      width: 2,\n      \"line-color\": \"#3b7bff\",\n      \"target-arrow-color\": \"#3b7bff\",\n      \"target-arrow-shape\": \"triangle\",\n      label: \"data(label)\",\n      color: \"#9dc4ff\",\n      \"font-size\": 11,\n      \"text-background-opacity\": 0.6,\n      \"text-background-color\": \"#0f0f0f\",\n      \"curve-style\": \"bezier\",\n    },\n  },\n];\n\nfunction toElements(graph) {\n  const nodes = (graph.nodes || []).map((n) => ({\n    data: { id: String(n.id), label: n.label ?? n.id },\n  }));\n  const edges = (graph.edges || []).map((e, idx) => ({\n    data: {\n      id: `e-${idx}-${e.source}-${e.target}`,\n      source: String(e.source),\n      target: String(e.target),\n      label: e.label ?? \"\",\n    },\n  }));\n  return [...nodes, ...edges];\n}\n\nfunction App() {\n  const cyRef = useRef(null);\n  const [elements, setElements] = useState([]);\n\n  const [retryToken, setRetryToken] = useState(Date.now());\n  const videoSrc = `${VIDEO_URL}?t=${retryToken}`;\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRetryToken(Date.now());\n    }, 10000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    let ws;\n    let retryTimer;\n\n    const connect = () => {\n      ws = new WebSocket(WS_URL);\n\n      ws.onmessage = (evt) => {\n        try {\n          const graph = JSON.parse(evt.data);\n          const newElements = toElements(graph);\n          setElements(newElements);\n          if (cyRef.current) {\n            cyRef.current.json({ elements: newElements });\n            cyRef.current.layout(layout).run();\n          }\n        } catch (err) {\n          console.error(\"Failed to parse graph\", err);\n        }\n      };\n\n      ws.onopen = () => console.log(\"WS connected\");\n      ws.onclose = () => {\n        console.log(\"WS closed, retrying...\");\n        retryTimer = setTimeout(connect, 2000);\n      };\n      ws.onerror = (e) => console.error(\"WS error\", e);\n    };\n\n    connect();\n\n    return () => {\n      if (ws) ws.close();\n      if (retryTimer) clearTimeout(retryTimer);\n    };\n  }, []);\n\n  return (\n    <div\n      style={{\n        background: \"#0f0f0f\",\n        width: \"100vw\",\n        height: \"100vh\",\n        margin: 0,\n        padding: 0,\n        overflow: \"hidden\",\n        display: \"flex\",\n      }}\n    >\n      <div style={{ flex: 1, borderRight: \"1px solid #1f1f1f\" }}>\n        <img\n          src={videoSrc}\n          alt=\"video stream\"\n          onError={() => setRetryToken(Date.now())}\n          style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\n        />\n      </div>\n\n      <div style={{ flex: 1 }}>\n        <CytoscapeComponent\n          cy={(cy) => {\n            cyRef.current = cy;\n          }}\n          elements={elements}\n          layout={layout}\n          stylesheet={style}\n          style={{ width: \"100%\", height: \"100%\" }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}